!function(){"use strict";var t=new Reef(document.querySelector("#app"),{data:{},template:function(t){if(null!==t.listID&&void 0!==t.listID)return function(t){var e=a().list,i=t.lists[e],n="<a href='index.html'>&larr; Back to lists</a><h2>"+i.name+"</h2><form id='add-items'><label for='new-item'>What do you want to do?</label><div class='flex'><input id='new-item' type='text' autofocus"+(t.edit?" value='"+i.items[t.edit].name+"'":"")+"><button type='submit'>"+(t.edit?"Save":"Add")+" Item</button></div></form>";if(i.items.length<1)return n+"<p>You haven't added any list items. Add some using the form above.</p>";return n+"<ul>"+i.items.map(function(t,e){var a="item-"+e;return"<li><input id='"+a+"' type='checkbox'><label for='"+a+"'>"+t.name+"</label><button class='pa0 bn bg-transparent' type='button' aria-label='Edit' data-edit='"+e+"'>✏️</button><button class='pa0 bn bg-transparent' type='button' aria-label='Delete' data-delete='"+e+"'>🗑</button></li>"}).join("")+"</ul>"}(t);return function(t){var e="<form id='add-lists'><label for='new-list'>Create a new to-do list</label><div class='flex'><input id='new-list' type='text' autofocus"+(t.edit?" value='"+t.lists[t.edit].name+"'":"")+"><button type='submit'>"+(t.edit?"Save":"Create")+" List</button></div></form>";if(t.lists.length<1)return e+"<p>You haven't created any lists. Add some using the form above.</p>";return e+"<ul>"+t.lists.map(function(t,e){return"<li><a href='?list="+e+"'>"+t.name+"</a><button class='pa0 bn bg-transparent' type='button' aria-label='Edit' data-edit='"+e+"'>✏️</button><button class='pa0 bn bg-transparent' type='button' aria-label='Delete' data-delete='"+e+"'>🗑</button></li>"}).join("")+"</ul>"}(t)}}),e="todos";function a(t){var e={},a=document.createElement("a");a.href=t||window.location.href;var i=a.search.substring(1).split("&");if(i.length<1||i[0].length<1)return e;for(var n=0;n<i.length;n++){var s=i[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}!function(){var i=localStorage.getItem(e),n=i?JSON.parse(i):{lists:[]};n.edit=null;var s=a().list;n.listID=s,t.setData(n)}(),t.elem.addEventListener("submit",function(e){e.preventDefault();var a=e.target.querySelector("input");if(a.value.trim()){var i=t.getData();"add-items"===e.target.id?i.edit?i.lists[i.listID].items[i.edit].name=a.value:i.lists[i.listID].items.push({name:a.value,done:!1}):"add-lists"===e.target.id&&(i.edit?i.lists[i.edit].name=a.value:i.lists.push({name:a.value,items:[]})),t.setData({lists:i.lists,edit:null}),a.value="",a.focus()}}),t.elem.addEventListener("change",function(e){if("checkbox"===e.target.type){var a=t.getData(),i=e.target.id.slice(-1);a.lists[a.listID].items[i].done=e.target.checked,t.setData({lists:a.lists})}}),t.elem.addEventListener("click",function(e){!function(e){var a=e.target.getAttribute("data-edit");a&&t.setData({edit:a})}(e),function(e){var a=e.target.getAttribute("data-delete");if(a){var i=t.getData();confirm("Are you sure you want to delete this"+(i.listID?"list":"item")+"? This cannot be reversed.")&&(i.listID?i.lists[i.listID].items.splice(a,1):i.lists.splice(a,1),t.setData({lists:i.lists,edit:null}))}}(e)}),t.elem.addEventListener("render",function(){localStorage.setItem(e,JSON.stringify(t.getData()));var a=document.querySelector("#new-item, #new-list");a&&a.focus()})}();